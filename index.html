<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="js/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Dancing+Script:400,700|Seaweed+Script' rel='stylesheet' type='text/css'>
	<style>

	body {
	  background: #fff;
	}

	#canvasSection {
		position: relative;
		width:480px;
		height: 480px;
		margin:30px auto;
	}
	canvas {
	  position: absolute;
	  top: 0;
	  left: 0;
	}

	.blur {
	  -webkit-filter: blur(6px);
	  filter: blur(6px);
	}
	h1 {
		font-family: 'Seaweed Script';
		font-size: 32px;
		font-weight: 700;
		letter-spacing: 1.2px;
		text-align: center;
	}
	h1:first-child {
		margin-top: 80px;
	}

	</style>
</head>
<body>
	<h1>Plee Software</h1>
	<section id="canvasSection">
	</section>
	<h1>Coming Soon</h1>
	<script src="js/d3.v3.min.js"></script>
	<script src="js/topojson.v1.min.js"></script>
	<script>

	var width = 480,
	    height = 480,
	    speed = -1e-2,
	    start = Date.now(),
	    canvasSection = d3.select("#canvasSection");
	    console.log(canvasSection);

	var sphere = {type: "Sphere"};

	var projection = d3.geo.orthographic()
	    .translate([width / 2, height / 2])
	    .precision(.5);

	var graticule = d3.geo.graticule();

	var canvas1 = d3.select("body > #canvasSection").append("canvas"),
	    canvas2 = d3.select("body > #canvasSection").append("canvas").attr("class", "blur"),
	    canvas3 = d3.select("body > #canvasSection").append("canvas");
	    console.log(canvas1);

	d3.selectAll("canvas")
	    .attr("width", width)
	    .attr("height", height);

	var context1 = canvas1.node().getContext("2d"),
	    context2 = canvas2.node().getContext("2d"),
	    context3 = canvas3.node().getContext("2d");

	var path = d3.geo.path()
	    .projection(projection);

	projection.scale(width / 2.3).clipAngle(90);

	context1.beginPath();
	path.context(context1)(sphere);
	context1.lineWidth = 3;
	context1.strokeStyle = "#000";
	context1.stroke();

	context1.beginPath();
	path(sphere);
	context1.fillStyle = "#fff";
	context1.fill();

	context2.fillStyle = "rgba(0,0,0,.4)";
	context3.strokeStyle = "rgba(0,0,0,.2)";

	d3.json("js/world-110m.json", function(error, topo) {
	  var land = topojson.feature(topo, topo.objects.land),
	      grid = graticule();

	  d3.timer(function() {
	    context2.clearRect(0, 0, width, height);
	    context3.clearRect(0, 0, width, height);

	    projection.rotate([speed * (Date.now() - start), -15]);

	    projection.scale(width / 2.3).clipAngle(90);

	    context2.beginPath();
	    path.context(context2)(land);
	    context2.fill();

	    context3.beginPath();
	    path.context(context3)(grid);
	    context3.lineWidth = .5;
	    context3.stroke();

	    projection.scale(width / 2.2).clipAngle(106.3);

	    context3.beginPath();
	    path(land);
	    context3.fillStyle = "#737368";
	    context3.fill();

	    projection.scale(width / 2.2).clipAngle(90);

	    context3.beginPath();
	    path(land);
	    context3.fillStyle = "#dadac4";
	    context3.fill();
	  });
	});

	d3.select(self.frameElement).style("height", height + "px");

	</script>
</body>
</html>